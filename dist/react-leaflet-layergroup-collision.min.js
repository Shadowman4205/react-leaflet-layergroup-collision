!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("leaflet"),require("react"),require("react-leaflet")):"function"==typeof define&&define.amd?define(["leaflet","react","react-leaflet"],e):"object"==typeof exports?exports.ReactLeaflet=e(require("leaflet"),require("react"),require("react-leaflet")):t.ReactLeaflet=e(t.L,t.React,t[void 0])}(this,function(t,e,i){return function(t){function e(n){if(i[n])return i[n].exports;var r=i[n]={exports:{},id:n,loaded:!1};return t[n].call(r.exports,r,r.exports,e),r.loaded=!0,r.exports}var i={};return e.m=t,e.c=i,e.p="",e(0)}([function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.LayerGroupCollision=void 0;var r=i(1),o=n(r);e.LayerGroupCollision=o.default},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),h=i(6),l=(n(h),i(7)),u=i(5),c=n(u);i(2);var f=function(t){function e(){return r(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),s(e,[{key:"getChildContext",value:function(){return{layerContainer:this.leafletElement}}},{key:"createLeafletElement",value:function(){var t=c.default.layerGroup.collision({margin:20},this.getOptions());return this.layerContainer.addLayer(t),t}},{key:"componentDidMount",value:function(){var t=this.context.map;t.on("zoomend",this._onZoomEnd,this)}},{key:"componentWillUnmount",value:function(){var t=this.context.map;t.off("zoomend",this._onZoomEnd,this)}}]),e}(l.MapLayer);f.childContextTypes={layerContainer:h.PropTypes.shape({addLayer:h.PropTypes.func.isRequired,removeLayer:h.PropTypes.func.isRequired})},e.default=f},function(t,e,i){"use strict";function n(t){return{initialize:function(e){t.prototype.initialize.call(this,e),this._originalLayers=[],this._visibleLayers=[],this._staticLayers=[],this._rbush=[],this._cachedRelativeBoxes=[],this._margin=e.margin||0,this._rbush=null},addLayer:function(e){return"options"in e&&"icon"in e.options?(this._originalLayers.push(e),void(this._map&&this._maybeAddLayerToRBush(e))):(this._staticLayers.push(e),void t.prototype.addLayer.call(this,e))},removeLayer:function(e){this._rbush.remove(this._cachedRelativeBoxes[e._leaflet_id]),delete this._cachedRelativeBoxes[e._leaflet_id],t.prototype.removeLayer.call(this,e);var i;i=this._originalLayers.indexOf(e),i!==-1&&this._originalLayers.splice(i,1),i=this._visibleLayers.indexOf(e),i!==-1&&this._visibleLayers.splice(i,1),i=this._staticLayers.indexOf(e),i!==-1&&this._staticLayers.splice(i,1)},clearLayers:function(){this._rbush=o(),this._originalLayers=[],this._visibleLayers=[],this._staticLayers=[],this._cachedRelativeBoxes=[],t.prototype.clearLayers.call(this)},onAdd:function(t){this._map=t;for(var e in this._staticLayers)t.addLayer(this._staticLayers[e]);this._onZoomEnd(),t.on("zoomend",this._onZoomEnd,this)},onRemove:function(e){for(var i in this._staticLayers)e.removeLayer(this._staticLayers[i]);e.off("zoomend",this._onZoomEnd,this),t.prototype.onRemove.call(this,e)},_maybeAddLayerToRBush:function(e){var i=(this._map.getZoom(),this._rbush),n=this._cachedRelativeBoxes[e._leaflet_id],r=!1;if(!n){t.prototype.addLayer.call(this,e);var r=!0,o=this._getIconBox(e._icon);n=this._getRelativeBoxes(e._icon.children,o),n.push(o),this._cachedRelativeBoxes[e._leaflet_id]=n}n=this._positionBoxes(this._map.latLngToLayerPoint(e.getLatLng()),n);for(var a=!1,s=0;s<n.length&&!a;s++)a=i.search(n[s]).length>0;a?t.prototype.removeLayer.call(this,e):(r||t.prototype.addLayer.call(this,e),this._visibleLayers.push(e),i.load(n))},_getIconBox:function(t){if(r)return[0,0,t.offsetWidth,t.offsetHeight];var e=window.getComputedStyle(t);return[parseInt(e.marginLeft),parseInt(e.marginTop),parseInt(e.marginLeft)+parseInt(e.width),parseInt(e.marginTop)+parseInt(e.height)]},_getRelativeBoxes:function(t,e){for(var i=[],n=0;n<t.length;n++){var o=t[n],a=[o.offsetLeft,o.offsetTop,o.offsetLeft+o.offsetWidth,o.offsetTop+o.offsetHeight];if(a=this._offsetBoxes(a,e),i.push(a),o.children.length){var s=e;if(!r){var h=window.getComputedStyle(o).position;"absolute"!==h&&"relative"!==h||(s=a)}i=i.concat(this._getRelativeBoxes(o.children,s))}}return i},_offsetBoxes:function(t,e){return[t[0]+e[0],t[1]+e[1],t[2]+e[0],t[3]+e[1]]},_positionBoxes:function(t,e){for(var i=[],n=0;n<e.length;n++)i.push(this._positionBox(t,e[n]));return i},_positionBox:function(t,e){return[e[0]+t.x-this._margin,e[1]+t.y-this._margin,e[2]+t.x+this._margin,e[3]+t.y+this._margin]},_onZoomEnd:function(){for(var e=0;e<this._visibleLayers.length;e++)t.prototype.removeLayer.call(this,this._visibleLayers[e]);this._rbush=o();for(var e=0;e<this._originalLayers.length;e++)this._maybeAddLayerToRBush(this._originalLayers[e])}}}var r=!("getComputedStyle"in window&&"function"==typeof window.getComputedStyle),o=i(4);L.LayerGroup.Collision=L.LayerGroup.extend(n(L.LayerGroup)),L.LayerGroup.collision=function(t){return new L.LayerGroup.Collision(t||{})},L.layerGroup.collision=function(t){var e=new L.LayerGroup.Collision(t||{});return console.log(e),e}},function(t,e){"use strict";function i(t,e,o,a,s){for(o=o||0,a=a||t.length-1,s=s||r;a>o;){if(a-o>600){var h=a-o+1,l=e-o+1,u=Math.log(h),c=.5*Math.exp(2*u/3),f=.5*Math.sqrt(u*c*(h-c)/h)*(l-h/2<0?-1:1),p=Math.max(o,Math.floor(e-l*c/h+f)),m=Math.min(a,Math.floor(e+(h-l)*c/h+f));i(t,e,p,m,s)}var d=t[e],_=o,x=a;for(n(t,o,e),s(t[a],d)>0&&n(t,o,a);_<x;){for(n(t,_,x),_++,x--;s(t[_],d)<0;)_++;for(;s(t[x],d)>0;)x--}0===s(t[o],d)?n(t,o,x):(x++,n(t,x,a)),x<=e&&(o=x+1),e<=x&&(a=x-1)}}function n(t,e,i){var n=t[e];t[e]=t[i],t[i]=n}function r(t,e){return t<e?-1:t>e?1:0}t.exports=i},function(t,e,i){"use strict";function n(t,e){return this instanceof n?(this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),e&&this._initFormat(e),void this.clear()):new n(t,e)}function r(t,e,i){if(!i)return e.indexOf(t);for(var n=0;n<e.length;n++)if(i(t,e[n]))return n;return-1}function o(t,e){a(t,0,t.children.length,e,t)}function a(t,e,i,n,r){r||(r=_(null)),r.minX=1/0,r.minY=1/0,r.maxX=-(1/0),r.maxY=-(1/0);for(var o,a=e;a<i;a++)o=t.children[a],s(r,t.leaf?n(o):o);return r}function s(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function h(t,e){return t.minX-e.minX}function l(t,e){return t.minY-e.minY}function u(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function c(t){return t.maxX-t.minX+(t.maxY-t.minY)}function f(t,e){return(Math.max(e.maxX,t.maxX)-Math.min(e.minX,t.minX))*(Math.max(e.maxY,t.maxY)-Math.min(e.minY,t.minY))}function p(t,e){var i=Math.max(t.minX,e.minX),n=Math.max(t.minY,e.minY),r=Math.min(t.maxX,e.maxX),o=Math.min(t.maxY,e.maxY);return Math.max(0,r-i)*Math.max(0,o-n)}function m(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function d(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function _(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-(1/0),maxY:-(1/0)}}function x(t,e,i,n,r){for(var o,a=[e,i];a.length;)i=a.pop(),e=a.pop(),i-e<=n||(o=e+Math.ceil((i-e)/n/2)*n,y(t,o,e,i,r),a.push(e,o,o,i))}t.exports=n;var y=i(3);n.prototype={all:function(){return this._all(this.data,[])},search:function(t){var e=this.data,i=[],n=this.toBBox;if(!d(t,e))return i;for(var r,o,a,s,h=[];e;){for(r=0,o=e.children.length;r<o;r++)a=e.children[r],s=e.leaf?n(a):a,d(t,s)&&(e.leaf?i.push(a):m(t,s)?this._all(a,i):h.push(a));e=h.pop()}return i},collides:function(t){var e=this.data,i=this.toBBox;if(!d(t,e))return!1;for(var n,r,o,a,s=[];e;){for(n=0,r=e.children.length;n<r;n++)if(o=e.children[n],a=e.leaf?i(o):o,d(t,a)){if(e.leaf||m(t,a))return!0;s.push(o)}e=s.pop()}return!1},load:function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0,i=t.length;e<i;e++)this.insert(t[e]);return this}var n=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===n.height)this._splitRoot(this.data,n);else{if(this.data.height<n.height){var r=this.data;this.data=n,n=r}this._insert(n,this.data.height-n.height-1,!0)}else this.data=n;return this},insert:function(t){return t&&this._insert(t,this.data.height-1),this},clear:function(){return this.data=_([]),this},remove:function(t,e){if(!t)return this;for(var i,n,o,a,s=this.data,h=this.toBBox(t),l=[],u=[];s||l.length;){if(s||(s=l.pop(),n=l[l.length-1],i=u.pop(),a=!0),s.leaf&&(o=r(t,s.children,e),o!==-1))return s.children.splice(o,1),l.push(s),this._condense(l),this;a||s.leaf||!m(s,h)?n?(i++,s=n.children[i],a=!1):s=null:(l.push(s),u.push(i),i=0,n=s,s=s.children[0])}return this},toBBox:function(t){return t},compareMinX:h,compareMinY:l,toJSON:function(){return this.data},fromJSON:function(t){return this.data=t,this},_all:function(t,e){for(var i=[];t;)t.leaf?e.push.apply(e,t.children):i.push.apply(i,t.children),t=i.pop();return e},_build:function(t,e,i,n){var r,a=i-e+1,s=this._maxEntries;if(a<=s)return r=_(t.slice(e,i+1)),o(r,this.toBBox),r;n||(n=Math.ceil(Math.log(a)/Math.log(s)),s=Math.ceil(a/Math.pow(s,n-1))),r=_([]),r.leaf=!1,r.height=n;var h,l,u,c,f=Math.ceil(a/s),p=f*Math.ceil(Math.sqrt(s));for(x(t,e,i,p,this.compareMinX),h=e;h<=i;h+=p)for(u=Math.min(h+p-1,i),x(t,h,u,f,this.compareMinY),l=h;l<=u;l+=f)c=Math.min(l+f-1,u),r.children.push(this._build(t,l,c,n-1));return o(r,this.toBBox),r},_chooseSubtree:function(t,e,i,n){for(var r,o,a,s,h,l,c,p;;){if(n.push(e),e.leaf||n.length-1===i)break;for(c=p=1/0,r=0,o=e.children.length;r<o;r++)a=e.children[r],h=u(a),l=f(t,a)-h,l<p?(p=l,c=h<c?h:c,s=a):l===p&&h<c&&(c=h,s=a);e=s||e.children[0]}return e},_insert:function(t,e,i){var n=this.toBBox,r=i?t:n(t),o=[],a=this._chooseSubtree(r,this.data,e,o);for(a.children.push(t),s(a,r);e>=0&&o[e].children.length>this._maxEntries;)this._split(o,e),e--;this._adjustParentBBoxes(r,o,e)},_split:function(t,e){var i=t[e],n=i.children.length,r=this._minEntries;this._chooseSplitAxis(i,r,n);var a=this._chooseSplitIndex(i,r,n),s=_(i.children.splice(a,i.children.length-a));s.height=i.height,s.leaf=i.leaf,o(i,this.toBBox),o(s,this.toBBox),e?t[e-1].children.push(s):this._splitRoot(i,s)},_splitRoot:function(t,e){this.data=_([t,e]),this.data.height=t.height+1,this.data.leaf=!1,o(this.data,this.toBBox)},_chooseSplitIndex:function(t,e,i){var n,r,o,s,h,l,c,f;for(l=c=1/0,n=e;n<=i-e;n++)r=a(t,0,n,this.toBBox),o=a(t,n,i,this.toBBox),s=p(r,o),h=u(r)+u(o),s<l?(l=s,f=n,c=h<c?h:c):s===l&&h<c&&(c=h,f=n);return f},_chooseSplitAxis:function(t,e,i){var n=t.leaf?this.compareMinX:h,r=t.leaf?this.compareMinY:l,o=this._allDistMargin(t,e,i,n),a=this._allDistMargin(t,e,i,r);o<a&&t.children.sort(n)},_allDistMargin:function(t,e,i,n){t.children.sort(n);var r,o,h=this.toBBox,l=a(t,0,e,h),u=a(t,i-e,i,h),f=c(l)+c(u);for(r=e;r<i-e;r++)o=t.children[r],s(l,t.leaf?h(o):o),f+=c(l);for(r=i-e-1;r>=e;r--)o=t.children[r],s(u,t.leaf?h(o):o),f+=c(u);return f},_adjustParentBBoxes:function(t,e,i){for(var n=i;n>=0;n--)s(e[n],t)},_condense:function(t){for(var e,i=t.length-1;i>=0;i--)0===t[i].children.length?i>0?(e=t[i-1].children,e.splice(e.indexOf(t[i]),1)):this.clear():o(t[i],this.toBBox)},_initFormat:function(t){var e=["return a"," - b",";"];this.compareMinX=new Function("a","b",e.join(t[0])),this.compareMinY=new Function("a","b",e.join(t[1])),this.toBBox=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")}}},function(e,i){e.exports=t},function(t,i){t.exports=e},function(t,e){t.exports=i}])});